<div class="container">
  <mat-card class="card-padrao">
    <div class="row">
      <div class="col-sm-12">
        <h2><b>ITENS</b></h2>
        <hr />
      </div>
    </div>
    <form [formGroup]="form">
      <mat-tab-group>
        <mat-tab label="Armas">
          <div class="row">
            <div class="col-sm-6 mt-4">
              <mat-form-field class="form-field">
                <mat-label>Arma</mat-label>
                <input
                  formControlName="nome"
                  matInput
                  type="text"
                  (keyup)="consultarArmas()"
                />
              </mat-form-field>
            </div>
            <div class="col-sm-6 mt-4">
              <mat-form-field class="form-field">
                <mat-label>Traço</mat-label>
                <input
                  matInput
                  formControlName="tracos"
                  type="text"
                  (keyup)="consultarArmas()"
                />
              </mat-form-field>
            </div>
          </div>
          <div class="col-sm-12 mt-4">
            <div class="d-flex justify-content-end">
              <b>Número de Registros: {{ numero_registros_armas }}</b>
            </div>
          </div>
          <mat-grid-list cols="2" [rowHeight]="600" gutterSize="15">
            <mat-grid-tile *ngFor="let arma of armas">
              <mat-card class="card-padrao">
                <mat-card-title
                  class="titulo-cartao-apresentacao interior-cartao interior-cartao-condicoes"
                >
                  {{ arma.nome }}
                </mat-card-title>
                <mat-card-content
                  class="interior-cartao interior-cartao-condicoes content-cartao-itens"
                >
                  <div class="content">
                    <mat-tab-group>
                      <mat-tab label="Descrição">
                        <div class="content">
                          <div class="row">
                            <div class="col-sm-12">
                              <hr class="" />
                            </div>
                            <div class="col-sm-12">
                              <div class="d-flex justify-content-end">
                                {{ arma.referencias + " pag. " + arma.paginas }}
                              </div>
                              <hr class="" />
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-sm-12 mt-2 button-row">
                              <section class="d-flex flex-wrap gap-2">
                                @for (traco of arma.tracos; track traco) {
                                <button class="me-2" mat-flat-button disabled>
                                  {{ traco }}
                                </button>
                                }
                              </section>
                            </div>
                            <!-- <div
                              class="col-sm-12 mt-2"
                              [innerHTML]="arma.tracos?.join(' || ')"
                            ></div> -->
                          </div>

                          <div class="row">
                            <div class="col-sm-12">
                              <hr class="" />
                            </div>
                          </div>
                          <div class="row">
                            <div
                              class="col-sm-8"
                              [innerHTML]="arma.descricao"
                            ></div>
                            <div class="col-sm-4">
                              <mat-card>
                                <img [src]="arma.imagem" />
                              </mat-card>
                            </div>
                          </div>
                        </div>
                      </mat-tab>
                      <mat-tab label="Estatísticas">
                        <div class="content">
                          <div class="row">
                            <div class="col-sm-6 mt-4">Dano</div>
                            <div
                              class="col-sm-6 mt-4 d-flex justify-content-end"
                            >
                              {{ arma.dano }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">Margem de Ameaça</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{
                                arma.margem_ameaca
                                  ? 21 - arma.margem_ameaca
                                  : 20
                              }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">Multiplicador de Crítico</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              x{{ arma.multiplicador_critico }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">Alcance</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{
                                arma.alcance === 0
                                  ? "-"
                                  : arma.alcance + " metros"
                              }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">Espaço</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ arma.espaco + " espaços de carga" }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">Tipo de Dano</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{
                                arma.tipo_dano?.length === 0
                                  ? "especial"
                                  : arma.tipo_dano?.join("/")
                              }}
                            </div>
                            <hr />
                          </div>
                        </div>
                      </mat-tab>
                      <mat-tab label="Fabricação">
                        <div class="content">
                          <div class="row">
                            <div class="col-sm-6 mt-4">Preço</div>
                            <div
                              class="col-sm-6 mt-4 d-flex justify-content-end"
                            >
                              {{ "T$ " + arma.preco }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">RD</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ arma.rd }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">PV's</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ arma.pv }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">
                              Perícia para Fabricação/Conserto
                            </div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ arma.pericia_fabricacao_conserto }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">
                              CD para Fabricação/Conserto
                            </div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ arma.cd_fabricacao }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">Custo de Fabricação</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ "T$ " + arma.preco_fabricacao }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">
                              Tempo de Fabricação (Em Horas)
                            </div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ arma.tempo_fabricacao_em_horas }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">Custo para Conserto</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ "T$ " + arma.preco_conserto }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">
                              Tempo de Conserto (Em Horas)
                            </div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ arma.tempo_conserto_em_horas }}
                            </div>
                            <hr />
                          </div>
                        </div>
                      </mat-tab>
                    </mat-tab-group>
                  </div>
                </mat-card-content>
              </mat-card>
            </mat-grid-tile>
          </mat-grid-list>
        </mat-tab>
        <mat-tab label="Munições">
          <div class="row">
            <div class="col-sm-6 mt-4">
              <mat-form-field class="form-field">
                <mat-label>Munições</mat-label>
                <input
                  formControlName="nome"
                  matInput
                  type="text"
                  (keyup)="consultarMunicoes()"
                />
              </mat-form-field>
            </div>
          </div>
          <div class="col-sm-12 mt-4">
            <div class="d-flex justify-content-end">
              <b>Número de Registros: {{ numero_registros_municoes }}</b>
            </div>
          </div>
          <mat-grid-list cols="2" [rowHeight]="600" gutterSize="15">
            <mat-grid-tile *ngFor="let municao of municoes">
              <mat-card class="card-padrao">
                <mat-card-title
                  class="titulo-cartao-apresentacao interior-cartao interior-cartao-condicoes"
                >
                  {{ municao.nome }}
                </mat-card-title>
                <mat-card-content
                  class="interior-cartao interior-cartao-condicoes content-cartao-itens"
                >
                  <div class="content">
                    <mat-tab-group>
                      <mat-tab label="Descrição">
                        <div class="content">
                          <div class="row">
                            <div class="col-sm-12">
                              <hr class="" />
                            </div>
                            <div class="col-sm-12">
                              <div class="d-flex justify-content-end">
                                {{
                                  municao.referencias +
                                    " pag. " +
                                    municao.paginas
                                }}
                              </div>
                              <hr class="" />
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-sm-12 mt-2 button-row">
                              <section class="d-flex flex-wrap gap-2">
                                @for (traco of municao.tracos; track traco) {
                                <button class="me-2" mat-flat-button disabled>
                                  {{ traco }}
                                </button>
                                }
                              </section>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-sm-12">
                              <hr class="" />
                            </div>
                          </div>
                          <div class="row">
                            <div
                              class="col-sm-8"
                              [innerHTML]="municao.descricao"
                            ></div>
                            <div class="col-sm-4">
                              <mat-card>
                                <img [src]="municao.imagem" />
                              </mat-card>
                            </div>
                          </div>
                        </div>
                      </mat-tab>
                      <mat-tab label="Estatísticas">
                        <div class="content">
                          <div class="row">
                            <div class="col-sm-6 mt-4">Espaço</div>
                            <div class="col-sm-6 mt-4 d-flex justify-content-end">
                              {{ municao.espaco }}
                            </div>
                            <hr />
                          </div>
                        </div>
                      </mat-tab>
                      <mat-tab label="Fabricação">
                        <div class="content">
                          <div class="row">
                            <div class="col-sm-6 mt-4">Preço</div>
                            <div
                              class="col-sm-6 mt-4 d-flex justify-content-end"
                            >
                              {{ "T$ " + municao.preco }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">Perícia para Fabricação</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ municao.pericia_fabricacao_conserto }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">CD para Fabricação</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ municao.cd_fabricacao }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">Custo de Fabricação</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ "T$ " + municao.preco_fabricacao }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">
                              Tempo de Fabricação (Em Horas)
                            </div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ municao.tempo_fabricacao_em_horas }}
                            </div>
                            <hr />
                          </div>
                        </div>
                      </mat-tab>
                    </mat-tab-group>
                  </div>
                </mat-card-content>
              </mat-card>
            </mat-grid-tile>
          </mat-grid-list>
        </mat-tab>
        <mat-tab label="Armaduras">
          <div class="row">
            <div class="col-sm-6 mt-4">
              <mat-form-field class="form-field">
                <mat-label>Armadura</mat-label>
                <input
                  formControlName="nome"
                  matInput
                  type="text"
                  (keyup)="consultarArmaduras()"
                />
              </mat-form-field>
            </div>
          </div>
          <div class="col-sm-12 mt-4">
            <div class="d-flex justify-content-end">
              <b>Número de Registros: {{ numero_registros_armadura }}</b>
            </div>
          </div>
          <mat-grid-list cols="2" [rowHeight]="600" gutterSize="15">
            <mat-grid-tile *ngFor="let armadura of armaduras">
              <mat-card class="card-padrao">
                <mat-card-title
                  class="titulo-cartao-apresentacao interior-cartao interior-cartao-condicoes"
                >
                  {{ armadura.nome }}
                </mat-card-title>
                <mat-card-content
                  class="interior-cartao interior-cartao-condicoes content-cartao-itens"
                >
                  <div class="content">
                    <mat-tab-group>
                      <mat-tab label="Descrição">
                        <div class="content">
                          <div class="row">
                            <div class="col-sm-12">
                              <hr class="" />
                            </div>
                            <div class="col-sm-12">
                              <div class="d-flex justify-content-end">
                                {{
                                  armadura.referencias +
                                    " pag. " +
                                    armadura.paginas
                                }}
                              </div>
                              <hr class="" />
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-sm-12 mt-2 button-row">
                              <section class="d-flex flex-wrap gap-2">
                                @for (traco of armadura.tracos; track traco) {
                                <button class="me-2" mat-flat-button disabled>
                                  {{ traco }}
                                </button>
                                }
                              </section>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-sm-12">
                              <hr class="" />
                            </div>
                          </div>
                          <div class="row">
                            <div
                              class="col-sm-8"
                              [innerHTML]="armadura.descricao"
                            ></div>
                            <div class="col-sm-4">
                              <mat-card>
                                <img [src]="armadura.imagem" />
                              </mat-card>
                            </div>
                          </div>
                        </div>
                      </mat-tab>
                      <mat-tab label="Estatísticas">
                        <div class="content">
                          <div class="row">
                            <div class="col-sm-6 mt-4">Defesa</div>
                            <div
                              class="col-sm-6 mt-4 d-flex justify-content-end"
                            >
                              {{ "+" + armadura.defesa }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">Penalidade</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ "-" + armadura.penalidade }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">Espaço</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ armadura.espaco }}
                            </div>
                            <hr />
                          </div>
                        </div>
                      </mat-tab>
                      <mat-tab label="Fabricação">
                        <div class="content">
                          <div class="row">
                            <div class="col-sm-6 mt-4">Preço</div>
                            <div
                              class="col-sm-6 mt-4 d-flex justify-content-end"
                            >
                              {{ "T$ " + armadura.preco }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">RD</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ armadura.rd }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">PV's</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ armadura.pv }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">
                              Perícia para Fabricação/Conserto
                            </div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ armadura.pericia_fabricacao_conserto }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">
                              CD para Fabricação/Conserto
                            </div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ armadura.cd_fabricacao }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">Custo de Fabricação</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ "T$ " + armadura.preco_fabricacao }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">
                              Tempo de Fabricação (Em Horas)
                            </div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ armadura.tempo_fabricacao_em_horas }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">Custo para Conserto</div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ "T$ " + armadura.preco_conserto }}
                            </div>
                            <hr />
                          </div>
                          <div class="row">
                            <div class="col-sm-6">
                              Tempo de Conserto (Em Horas)
                            </div>
                            <div class="col-sm-6 d-flex justify-content-end">
                              {{ armadura.tempo_conserto_em_horas }}
                            </div>
                            <hr />
                          </div>
                        </div>
                      </mat-tab>
                    </mat-tab-group>
                  </div>
                </mat-card-content>
              </mat-card>
            </mat-grid-tile>
          </mat-grid-list>
        </mat-tab>
      </mat-tab-group>
    </form>
  </mat-card>
</div>
